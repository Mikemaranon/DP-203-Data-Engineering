<html> 
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Batería de preguntas</title>
        <link rel="stylesheet" href="../styles/body-style.css">
        <link rel="stylesheet" href="../styles/chat-style.css">
        <link rel="stylesheet" href="../styles/generalStyle.css">
        <link rel="stylesheet" href="../styles/header-style.css">
        <link rel="stylesheet" href="../styles/topic-index.css">
        <link rel="stylesheet" href="../styles/questions.css">
    </head>
    <body>
        <header>
            <div>
                <div class="button1">
                    <button onclick="window.location.href='../index.html'">Documentación</button>
                </div>
            </div> 
            <div class="title">
                <h1>Certification Exam: DP-203</h1>
            </div>
            <div>
                <div class="button2">
                    <button onclick="window.location.href='error.html'">Reportar error</button>
                </div>
            </div> 
        </header>
        <main>
            <section class="back-section-left"></section>
            <section class="left-section">
                <div class="topic-index">
                    <h2>Índice</h2><br>
                        <ul>
                            <li><a href="#">Tema 1</a>
                                <ul class="sublist">
                                    <li><a href="#q10">Pregunta 10</a></li>
                                    <li><a href="#q20">Pregunta 20</a></li>
                                    <li><a href="#q30">Pregunta 30</a></li>
                                </ul>
                            </li>
                        </ul>
                </div>
            </section>
            <section class="center-section">
                <br id="q10">
                <h1>Temario para la preparación del examen de certificación DP-203</h1>
                <div class="question" id="question10">
                    <h3>Pregunta 10</h3>
                    <p class="description">
                        Esta pregunta tiene una descripción genérica, las respuestas aportadas no tienen ningún valor y
                        por supuesto esto es solo una prueba.<br>
                        Selecciona la opción correcta para completar la prueba
                    </p>
                    <form id="question10-form">
                        <label>
                            <input type="radio" name="question10" value="opcion1"> Opción 1
                        </label>
                        <label>
                            <input type="radio" name="question10" value="opcion2"> Opción 2
                        </label>
                        <label>
                            <input type="radio" name="question10" value="opcion3"> Opción 3
                        </label>
                        <label>
                            <input type="radio" name="question10" value="opcion4"> Opción 4
                        </label>
                        <div class="buttons">
                            <button type="submit">Enviar</button>
                        </div>
                    </form>
                    <script>
                        let form = document.getElementById('question10-form');
                    
                        form.addEventListener('submit', function(event) {
                            event.preventDefault();
                            console.log('Formulario enviado sin recargar la página');
                        });
                    </script>
                </div><br id="q20">
                <div class="question" id="question20">
                    <h3>Pregunta 20</h3>
                    <p class="description">
                        Esta pregunta tiene una descripción genérica, las respuestas aportadas no tienen ningún valor y
                        por supuesto esto es solo una prueba.<br>
                        Selecciona la opción correcta para completar la prueba
                    </p>
                    <form id="question20-form">
                        <label>
                            <input type="checkbox" name="question20" value="opcion1"> Opción 1
                        </label>
                        <label>
                            <input type="checkbox" name="question20" value="opcion2"> Opción 2
                        </label>
                        <label>
                            <input type="checkbox" name="question20" value="opcion3"> Opción 3
                        </label>
                        <label>
                            <input type="checkbox" name="question20" value="opcion4"> Opción 4
                        </label>
                        <div class="buttons">
                            <button type="submit">Enviar</button>
                        </div>
                    </form>
                    <script>
                        form = document.getElementById('question20-form');
                    
                        form.addEventListener('submit', function(event) {
                            event.preventDefault();
                            console.log('Formulario enviado sin recargar la página');
                        });
                    </script>
                </div><br id="q30">
                <div class="question" id="question30">
                    <h3>Pregunta 30</h3>
                    <p class="description">
                        Arrastra los bloques azules a las zonas de respuesta correctas. Esto es solo una prueba de diseño.<br>
                    </p>
                    <form class="hotspot">
                        <!-- Contenedor para las zonas de arrastre y respuesta -->
                        <div class="drag-drop-zone-container">
                            <!-- Zona de arrastre -->
                            <div class="drag-zone">
                                <div class="draggable" draggable="true" id="block1">Bloque 1</div>
                                <div class="draggable" draggable="true" id="block2">Bloque 2</div>
                                <div class="draggable" draggable="true" id="block3">Bloque 3</div>
                            </div>
                    
                            <!-- Zona de respuesta -->
                            <div class="drop-zone">
                                <div class="droppable" id="zone1"></div>
                                <div class="droppable" id="zone2"></div>
                                <div class="droppable" id="zone3"></div>
                            </div>
                        </div>
                    
                        <!-- Botones en la parte inferior -->
                        <div class="buttons">
                            <button type="submit">Enviar</button>
                            <button type="button" id="reset-btn" onclick="sendDragDropResponse('question30')">Reiniciar</button>
                        </div>
                    </form>
                            
                    <script>
                        // Lógica Drag and Drop con verificación de zona ocupada    
                        const draggables = document.querySelectorAll('.draggable');
                        const droppables = document.querySelectorAll('.droppable');
                        const resetButton = document.getElementById('reset-btn'); // Botón de reinicio
                        const dragZone = document.querySelector('.drag-zone'); // Zona de arrastre

                        // Función para manejar el inicio del arrastre
                        draggables.forEach(draggable => {
                            draggable.addEventListener('dragstart', (event) => {
                                event.dataTransfer.setData('text/plain', event.target.id);
                            });
                        });

                        // Función para manejar el evento de "drop" (soltar) de un bloque en una zona
                        droppables.forEach(zone => {
                            zone.addEventListener('dragover', (event) => {
                                event.preventDefault(); // Permitir el "drop"
                                zone.style.backgroundColor = "#b2ebf2"; // Cambiar color cuando el ratón está sobre la zona
                            });

                            zone.addEventListener('dragleave', () => {
                                zone.style.backgroundColor = ""; // Restablecer el color cuando el ratón sale
                            });

                            zone.addEventListener('drop', (event) => {
                                event.preventDefault(); // Prevenir el comportamiento por defecto

                                const blockId = event.dataTransfer.getData('text/plain');
                                const block = document.getElementById(blockId);

                                // Verificar si la zona ya tiene un bloque
                                if (zone.childElementCount === 0) {
                                    zone.appendChild(block); // Mover el bloque a la zona de respuesta
                                    zone.style.backgroundColor = ""; // Restablecer el color de la zona
                                } else {
                                    zone.style.backgroundColor = "#ffcccc"; // Color de advertencia si ya hay un bloque
                                    setTimeout(() => {
                                        zone.style.backgroundColor = ""; // Restablecer el color de advertencia
                                    }, 500);
                                }
                            });
                        });

                        // Botón de reinicio para limpiar las zonas de respuesta y devolver los bloques
                        resetButton.addEventListener('click', () => {
                            // Limpiar las zonas de respuesta
                            droppables.forEach(zone => {
                                while (zone.firstChild) {
                                    zone.removeChild(zone.firstChild); // Eliminar los bloques de las zonas de respuesta
                                }
                                zone.style.backgroundColor = ""; // Restablecer el color de fondo
                            });

                            // Volver a colocar los bloques en su zona de arrastre
                            draggables.forEach(block => {
                                // Asegurarse de que el bloque está en la zona de arrastre
                                if (!dragZone.contains(block)) {
                                    dragZone.appendChild(block); // Moverlo a la zona de arrastre
                                }
                            });
                        });
                    </script>
                </div>
                <br>
                <footer>
                    Web designed by Miguel Marañón Quero & Roberto García Moreno
                </footer>
            </section>    
            <section class="back-section-right"></section>
            <section class="right-section">
                <div class="chaty">
                    <p>Deja que Chaty te ayude con tus dudas!</p>
                </div>
                <div class="chat-history" id="chat-history">
                    <!-- Aquí se mostrarán los mensajes del chat -->
                </div>
                <div >
                    <form class="chat-input" action="#">
                        <input type="text" id="chat-message" placeholder="Escribe tu mensaje..." />
                        <button onclick="sendMessage()">Enviar</button>                   
                    </form>
                </div>
            </section>
        </main>
        <script src="../js-codes/chat.js"></script>
    </body>
</html>